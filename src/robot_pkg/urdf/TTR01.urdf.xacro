<?xml version="1.0"?>

<robot xmlns:xacro="http://www.ros.org/wiki/xacro"  name="TTR01">

    <!--world frame-->
    <xacro:include filename="parameters.xacro"/>

    <link name="base_link"> </link>


    <!--base frame-->
    <joint name="B_base_joint" type="fixed">
        <origin xyz="0 0 0.05606" rpy="0 0 0"/>

        <parent link="base_link"/>
        <child link="B_base_link"/>        
    </joint>

    <xacro:property name="B_base_length" value="0.005"/>
    <xacro:property name="B_base_radius" value="0.085"/>

    <link name="B_base_link">
        <visual>
            <origin xyz="0 0 0" rpy="0 0 0"/>

            <geometry>    
                <!--<mesh filename="package://robot_pkg/meshes/base_link.STL" />-->
                <cylinder length="${B_base_length}" radius="${B_base_radius}"/>
            </geometry>

            <material name="white"/>
        </visual>

        <collision>
            <origin xyz="0 0 0" rpy="0 0 0"/>

            <geometry>
                <!--<mesh filename="package://robot_pkg/meshes/base_link.STL" />-->            
                <cylinder length="${B_base_length}" radius="${B_base_radius}"/>
            </geometry>
        </collision>

        <xacro:inertial_cylinder mass="0.9" length="${B_base_length}" radius="${B_base_radius}">
            <origin xyz="0 0 0.05606" rpy="0 0 0"/>

        </xacro:inertial_cylinder>
    </link>


    <!--L_wheel_frame-->
    <joint name="L_wheel_joint" type="continuous">
        <origin xyz="0 -0.0986 -0.0225" rpy="${-pi/2} ${-pi/2} ${pi}"/>

        <parent link="B_base_link"/>
        <child link="L_wheel_link"/>    
        <axis xyz="0 0 1"/>
        <limit effort="0.323" velocity="10.47" />    
    </joint>

    <xacro:property name="wheel_thickness" value="0.027"/>
    <xacro:property name="wheel_radius" value="0.0325"/>

    <link name="L_wheel_link">
        <visual>
            <origin xyz="0 0 0" rpy="0 0 0"/>

            <geometry>    
                <cylinder length="${wheel_thickness}" radius="${wheel_radius}"/>
            </geometry>

            <material name="black"/>
        </visual>

        <collision>
            <origin xyz="0 0 0" rpy="0 0 0"/>

            <geometry>          
                <cylinder length="${wheel_thickness}" radius="${wheel_radius}"/>
            </geometry>
        </collision>

        <xacro:inertial_cylinder mass="0.05" length="${wheel_thickness}" radius="${wheel_radius}">
            <origin xyz="0 -0.0986 -0.023" rpy="${-pi/2} ${-pi/2} ${pi}"/>

        </xacro:inertial_cylinder>
    </link>


    <!--R_wheel_frame-->
    <joint name="R_wheel_joint" type="continuous">
        <origin xyz="0 0.0986 -0.0225" rpy="${-pi/2} ${pi/2} 0"/>

        <parent link="B_base_link"/>
        <child link="R_wheel_link"/>    
        <axis xyz="0 0 -1"/>
        <limit effort="0.323" velocity="10.47" />    
    </joint>

    <link name="R_wheel_link">
        <visual>
            <origin xyz="0 0 0" rpy="0 0 0"/>

            <geometry>    
                <cylinder length="${wheel_thickness}" radius="${wheel_radius}"/>
            </geometry>

            <material name="black"/>
        </visual>

        <collision>
            <origin xyz="0 0 0" rpy="0 0 0"/>

            <geometry>          
                <cylinder length="${wheel_thickness}" radius="${wheel_radius}"/>
            </geometry>
        </collision>

        <xacro:inertial_cylinder mass="0.05" length="${wheel_thickness}" radius="${wheel_radius}">
            <origin xyz="0 0.0986 -0.0225" rpy="${-pi/2} ${pi/2} 0"/>

        </xacro:inertial_cylinder>
    </link>


    <xacro:include filename="gazebo_setup.xacro"/>

</robot>